{"version":3,"file":"js/index.a8967e0e.js","mappings":"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","sources":["webpack://vue-multiple-pages/./src/config/page.js","webpack://vue-multiple-pages/./src/config/env.js","webpack://vue-multiple-pages/./src/config/request.js","webpack://vue-multiple-pages/./src/config/app.js","webpack://vue-multiple-pages/./src/utils/common.js","webpack://vue-multiple-pages/./src/utils/request.js","webpack://vue-multiple-pages/./src/api/inex.js","webpack://vue-multiple-pages/./src/pages/index/LoginPopup.vue","webpack://vue-multiple-pages/./src/pages/index/LoginPopup.vue?c384","webpack://vue-multiple-pages/./src/pages/index/App.vue","webpack://vue-multiple-pages/./src/pages/index/App.vue?ce0f","webpack://vue-multiple-pages/./src/utils/checkUrlParams.js","webpack://vue-multiple-pages/./src/pages/index/main.js","webpack://vue-multiple-pages/webpack/bootstrap","webpack://vue-multiple-pages/webpack/runtime/chunk loaded","webpack://vue-multiple-pages/webpack/runtime/compat get default export","webpack://vue-multiple-pages/webpack/runtime/define property getters","webpack://vue-multiple-pages/webpack/runtime/global","webpack://vue-multiple-pages/webpack/runtime/hasOwnProperty shorthand","webpack://vue-multiple-pages/webpack/runtime/runtimeId","webpack://vue-multiple-pages/webpack/runtime/jsonp chunk loading","webpack://vue-multiple-pages/webpack/startup"],"sourcesContent":["//这里做页面参数约定和说明，如果url没有携带requiredParams的参数则无法初始化页面\r\nmodule.exports = {\r\n  index: {\r\n    title: \"ai-智能助手\",\r\n    requiredParams: {}\r\n  },\r\n  userAgreement:{\r\n    title: \"用户隐私协议\",\r\n    requiredParams: {\r\n    }\r\n  },\r\n};\r\n","export const env =  process.env.VUE_APP_ENV\r\n\r\nexport const isDevEnv = env === \"Dev\"\r\n\r\nexport const isTestEnv = env === \"Test\"\r\n\r\nexport const isProEnv = env === \"Pro\"\r\n\r\n\r\n\r\n","import {isProEnv } from \"./env\"\r\nexport const timeout = 3000\r\n\r\nexport const requestRetry = 4\r\n\r\nexport const requestRetryDelay = 800\r\n\r\nexport const baseURL = isProEnv ? window.location.origin:process.env.VUE_APP_REQ_URL\r\n\r\n\r\n","\r\nexport const version = \"0.1.0\"\r\n\r\nexport const tokenKey = \"Q_L_R_R_ACCESS_TOKEN\"\r\n\r\nexport const userInfoKey = \"Q_L_R_R_USER_INFO\"\r\n\r\n\r\n\r\n","import Storage from \"good-storage\";\r\nimport { userInfoKey,tokenKey } from \"@/config/app\";\r\n\r\n/**\r\n * 获取当前页面的参数\r\n * @param key\r\n * @returns {{}|null|*}\r\n */\r\nexport function getPageParams(key = null) {\r\n  let paramsUrl = window.location.href.split(\"?\");\r\n  if (paramsUrl.length < 2) return key ? null : {};\r\n  let paramsArr = paramsUrl[1].split(\"&\");\r\n  let paramsData = {};\r\n  paramsArr.forEach(r => {\r\n    let data = r.split(\"=\");\r\n    paramsData[data[0]] = data[1];\r\n  });\r\n  if (key) return paramsData.key ? paramsData[key] : null;\r\n  return paramsData;\r\n}\r\n\r\n/**\r\n * 将对象转换为?a=5&b=7形式\r\n * @param obj\r\n * @param firstStr\r\n * @returns {string|string}\r\n */\r\nexport function obj2StrParams(obj, firstStr = \"?\") {\r\n  let params = firstStr;\r\n\r\n  for (let p in obj) {\r\n    params += p + \"=\" + obj[p] + \"&\";\r\n  }\r\n  return params.substring(0, params.length - 1);\r\n}\r\n\r\n/**\r\n * 获取当前url\r\n * http://192.168.49.71:8081/ => http://192.168.49.71:8081/\r\n * http://192.168.49.71:8081/mm/ => http://192.168.49.71:8081/mm/\r\n * http://192.168.49.71:8081/mm/index.html => http://192.168.49.71:8081/mm/\r\n * http://192.168.49.71:8081/mm/ff/login.html?id=55 => http://192.168.49.71:8081/mm/ff/\r\n * 页面名字不能能匹配除\\w 的地址，也就是说你的页面名字名字必须由a-z、A-Z、0-9，以及下划线组成才可以。\r\n * @returns {string}\r\n */\r\nexport function getCurrentUrl() {\r\n  let allUrl = window.location.href;\r\n  let match = allUrl.match(/(\\S+\\/)\\w+.html/i);\r\n  return match && Array.isArray(match) && match.length > 1 ? match[1] : allUrl;\r\n}\r\n\r\n/**\r\n * 重置对象（会修改原始对象）\r\n * @param object\r\n * @param defaultVal\r\n */\r\nexport function resetObject(object, defaultVal = {}) {\r\n  for (let k in object) {\r\n    if (defaultVal.k) {\r\n      object[k] = defaultVal[k];\r\n    } else {\r\n      if (Array.isArray(object[k])) object[k] = [];\r\n      if (\"string\" == typeof object[k]) object[k] = \"\";\r\n      if (\"number\" == typeof object[k]) object[k] = null;\r\n      if (\"boolean\" == typeof object[k]) object[k] = false;\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * 对象赋值（会修改原始对象）\r\n * @param object\r\n * @param valObject\r\n */\r\nexport function fillerLeft(object, valObject = {}) {\r\n  for (let k in object) {\r\n    if (valObject.k) {\r\n      object[k] = valObject[k];\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * 获取用户信息\r\n * @param key\r\n * @returns {null|*|undefined|{}}\r\n */\r\nexport function getUserInfo(key = null) {\r\n  let userInfo = Storage.get(userInfoKey) || {};\r\n  if (key) return userInfo[key] ? userInfo[key] : null;\r\n  return userInfo || {};\r\n}\r\n\r\n/**\r\n * 设置用户信息\r\n * @param user\r\n * @returns {*}\r\n */\r\nexport function setUserInfo(user) {\r\n  Storage.set(userInfoKey, user);\r\n  return user;\r\n}\r\n\r\n/**\r\n * 获取Token\r\n * @returns {*|undefined}\r\n */\r\nexport function getToken() {\r\n  return Storage.get(tokenKey);\r\n}\r\nexport function isLogin() {\r\n  return Storage.get(tokenKey,\"\").length>5;\r\n}\r\n\r\n/**\r\n * 设置Token\r\n * @param token\r\n * @returns {*|undefined}\r\n */\r\nexport function setToken(token) {\r\n  return Storage.set(tokenKey, token);\r\n}\r\n\r\n/**\r\n * 移除Token\r\n * @returns {*}\r\n */\r\nexport function removeToken() {\r\n  return Storage.remove(tokenKey);\r\n}\r\n","import Axios from \"axios\";\r\nimport { getToken } from \"@/utils/common.js\";\r\nimport { showLoadingToast,closeToast,showToast } from \"vant\";\r\nimport { baseURL,timeout,requestRetryDelay,requestRetry } from \"@/config/request\";\r\n\r\nconst service = Axios.create({\r\n  baseURL,\r\n  headers: {\r\n    Accept: \"*/*\"\r\n  },\r\n  timeout\r\n});\r\n\r\nservice.defaults.retry = requestRetry;\r\nservice.defaults.retryDelay = requestRetryDelay;\r\n\r\n\r\nservice.interceptors.request.use(\r\n  config => {\r\n    if (config.showLoading) {\r\n      showLoadingToast({\r\n        message: '加载中...',\r\n        forbidClick: true,\r\n      });\r\n    }\r\n    config.headers[\"Authorization\"] = getToken();\r\n    return config;\r\n  },\r\n  error => {\r\n    closeToast()\r\n    Promise.reject(error);\r\n  }\r\n);\r\n\r\nservice.interceptors.response.use(\r\n  res => {\r\n    closeToast()\r\n    if (res.status !== 200) {\r\n      showToast('数据返回出错');\r\n      return Promise.reject(\"响应非200！\");\r\n    } else {\r\n        if(!res.data.Status){\r\n            showToast(res.data.Msg);\r\n            return Promise.reject(res.data.Msg);\r\n        }\r\n      return res.data.Data;\r\n    }\r\n  },\r\n  error => {\r\n    showToast(error.message);\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\nexport default service;\r\n\r\n\r\nexport const transformRequest = [function (data) {\r\n  let formData = new FormData()\r\n  for (let key in data) {\r\n    formData.append(key, data[key])\r\n  }\r\n  return formData\r\n}];\r\n","import request from \"@/utils/request.js\"\r\n\r\n\r\nexport const login = (params) => {\r\n  return request({\r\n    url: \"/v1/login\",\r\n    method: \"post\",\r\n    data: params\r\n  });\r\n}\r\n","<template>\r\n  <Popup\r\n      :show=\"modelValue\"\r\n      round\r\n      position=\"bottom\"\r\n      :style=\"{ height: '40%' }\"\r\n  >\r\n    <CellGroup inset style=\"margin-top: 40px\">\r\n      <Field\r\n          v-model=\"username\"\r\n          name=\"username\"\r\n          label=\"用户名\"\r\n          placeholder=\"请填写用户名\"\r\n      />\r\n      <Field\r\n          v-model=\"password\"\r\n          name=\"password\"\r\n          type=\"password\"\r\n          label=\"验证码\"\r\n          placeholder=\"请填写密码\"\r\n      >\r\n      </Field>\r\n    </CellGroup>\r\n    <div style=\"margin: 16px;display: flex;flex-direction: column\">\r\n      <Button  round block type=\"primary\" @click=\"onSubmit\">\r\n        登录\r\n      </Button>\r\n      <Checkbox icon-size=\"16px\" style=\"margin-top: 26px;font-size: 13px;\" v-model=\"checked\" >\r\n        已阅读并同意《<a style=\"color: #0077d6\" href=\"./userAgreement.html\">用户隐私政策</a>》\r\n      </Checkbox>\r\n    </div>\r\n\r\n  </Popup>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref } from \"vue\"\r\nimport { Button,CellGroup,Field ,showToast,Popup,Checkbox} from \"vant\"\r\nimport { login } from \"@/api/inex.js\"\r\nimport { setToken,setUserInfo } from \"@/utils/common.js\"\r\n\r\ndefineProps({\r\n  modelValue:Boolean,\r\n})\r\nconst emit  = defineEmits(['success'])\r\n\r\n\r\nconst username = ref('');\r\nconst password = ref('');\r\n\r\nconst checked = ref(false)\r\n\r\n\r\n\r\nconst onSubmit = async () => {\r\n  if (!checked.value){\r\n    showToast(\"请阅读并同意《用户隐私政策》\")\r\n    return\r\n  }\r\n  if(!username.value){\r\n    showToast(\"请填写用户名\")\r\n    return\r\n  }\r\n  if(!password.value){\r\n    showToast(\"请正确填写密码\")\r\n    return\r\n  }\r\n  const user = await login({\r\n    Password:password.value,\r\n    Username:username.value,\r\n  })\r\n\r\n  setUserInfo(user)\r\n  setToken(user.Token)\r\n  emit('success')\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n\r\n</style>\r\n","import script from \"./LoginPopup.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./LoginPopup.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n<div class=\"index\">\r\n  <div class=\"dialog\">\r\n    <div class=\"block\" v-for=\"(n,i) in chat\" :key=\"i\">\r\n      <span>{{ n.role.charAt(0).toUpperCase() + n.role.slice(1) }}:</span>\r\n      <br>\r\n      <div class=\"dialog-msg\" v-if=\"n.role == 'assistant'\" v-html=\"markedParse(n.content)\"></div>\r\n      <div class=\"dialog-msg\" v-else>{{ n.content }}</div>\r\n    </div>\r\n  </div>\r\n  <div class=\"input\">\r\n    <Field\r\n        v-model=\"question\"\r\n        center\r\n        clearable\r\n        placeholder=\"请输入你的问题\"\r\n    >\r\n      <template #button>\r\n        <Button round :disabled=\"answering\" size=\"small\" type=\"primary\" @click=\"sendQuestion()\">发   送</Button>\r\n      </template>\r\n    </Field>\r\n  </div>\r\n  <LoginPopup v-model=\"showLoginPopup\" @success=\"loginSuccess\"/>\r\n</div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref } from \"vue\"\r\nimport {marked} from \"marked\"\r\nimport { baseURL } from \"@/config/request.js\"\r\nimport { showToast,Field ,Button } from \"vant\"\r\nimport LoginPopup from \"./LoginPopup.vue\"\r\nimport {getToken, isLogin} from \"@/utils/common.js\"\r\n\r\nconst chat = ref([])\r\nconst question = ref(\"\")\r\nconst answering = ref(false)\r\n\r\nconst showLoginPopup = ref(!isLogin())\r\n\r\n\r\n\r\nconst markedParse = (t) => {\r\n  return marked.parse(t)\r\n}\r\nconst sendQuestion = async () => {\r\n  question.value = question.value.trim()\r\n  if (question.value.length === 0) {\r\n    showToast(\"请输入你的问题！\")\r\n    return\r\n  }\r\n  answering.value = true\r\n  // let loading = showLoadingToast({duration:0})\r\n  try {\r\n    const response = await fetch(baseURL + \"/api/openai/GPT3Dot5Turbo\", {\r\n      method: 'post',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        \"Authorization\" : getToken()\r\n      },\r\n      body: JSON.stringify([...chat.value, {\r\n        role: \"user\",\r\n        content: question.value\r\n      }]),\r\n    })\r\n    if (!response.ok) {\r\n      const msg = await response.text()\r\n      throw new Error(msg)\r\n    }\r\n    chat.value.push({\r\n      role: \"user\",\r\n      content: question.value\r\n    }, {\r\n      role: \"assistant\",\r\n      content: \"\"\r\n    })\r\n    question.value = \"\"\r\n\r\n    const decoder = new TextDecoder('utf-8');\r\n    const reader = response.body.getReader();\r\n    // eslint-disable-next-line no-constant-condition\r\n    while (true) {\r\n      const {value, done} = await reader.read();\r\n      if (done) {\r\n        // let msg = document.querySelectorAll('.dialog-msg')\r\n        // let len = chat.value.length\r\n        // if (msg.length !== len || msg.length === 0){\r\n        //   break\r\n        // }\r\n        // let pre = msg[len-1].querySelectorAll('pre')\r\n        // if(pre.length ===0){\r\n        //   break\r\n        // }\r\n        // pre.forEach(el=>{\r\n        //   // hljs.highlightElement(el);\r\n        // })\r\n        break\r\n      }\r\n      chat.value[chat.value.length - 1].content += decoder.decode(value)\r\n    }\r\n    answering.value = false\r\n    // loading.close()\r\n  } catch (e) {\r\n    showToast(e.message)\r\n    answering.value = false\r\n    // setTimeout(()=>{\r\n    //   loading.close()\r\n    // },1000)\r\n  }\r\n}\r\n\r\n\r\nconst loginSuccess = ()=>{\r\n  showLoginPopup.value = false\r\n}\r\n\r\n</script>\r\n\r\n<style  lang=\"scss\">\r\n  .index{\r\n    display: flex;\r\n    width: 100%;\r\n    height: 100vh;\r\n    background: #fff;\r\n    flex-direction: column;\r\n    justify-content: flex-start;\r\n    align-items: center;\r\n    .dialog{\r\n      width: 100%;\r\n      flex: 1;\r\n      padding: 0 10px;\r\n      overflow-y: auto;\r\n      overflow-x: hidden;\r\n      color: #222;\r\n      .block{\r\n        padding: 18px;\r\n        background: #f4f4f4;\r\n        margin-top: 10px;\r\n        border-radius: 10px;\r\n        font-size: 13px;\r\n        .dialog-msg{\r\n          margin-top: 10px;\r\n          pre{\r\n            background: #eee;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    .input{\r\n      width: 100%;\r\n    }\r\n  }\r\n</style>\r\n","import script from \"./App.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./App.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./App.vue?vue&type=style&index=0&id=c0bbe736&lang=scss\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { getPageParams } from \"./common.js\";\r\nimport allPageConfig from \"@/config/page.js\";\r\n\r\nlet pageName = window.PAGE_PATH; //PAGE_PATH在public中定义。\r\nlet pageConfig = allPageConfig[pageName] || {};\r\n\r\nfunction validateParams(requiredParams = {}, pageParams) {\r\n  let errorMsg = [];\r\n  if (Object.keys(requiredParams).length === 0) return errorMsg;\r\n  for (let key in requiredParams) {\r\n    if (!pageParams[key]) {\r\n      errorMsg.push({ name: key, desc: requiredParams[key] });\r\n    }\r\n  }\r\n  return errorMsg;\r\n}\r\n\r\nexport function initPage() {\r\n  let pageParams = getPageParams();\r\n  let errorMsg = validateParams(pageConfig.requiredParams, pageParams);\r\n\r\n  return new Promise((resolve, reject) => {\r\n    if (errorMsg.length !== 0) {\r\n      console.table(errorMsg);\r\n      document.body.innerHTML = `<div style=\"width: 100%;height: 100vh;display: flex;flex-direction:column;justify-content: center;align-items: center\">\r\n页面路径出错，请尝试重新打开。\r\n<code style=\"padding: 20px;margin-top:20px;background: #eee;\">参数：${errorMsg.map(r=>(r.desc)).join(\"、\")}</code>\r\n</div>`;\r\n      reject(errorMsg);\r\n    } else {\r\n\r\n      resolve({pageName, pageParams});\r\n    }\r\n  });\r\n}\r\n","import App from './App.vue'\r\nimport \"@/assets/js/common\"\r\nimport {createApp} from 'vue'\r\nimport {initPage} from \"@/utils/checkUrlParams.js\"\r\n\r\ninitPage().then(({pageName, pageParams}) => {\r\n  window.$pageName = pageName;\r\n  window.$pageParams = pageParams;\r\n  createApp(App).mount('#app')\r\n}).catch(e => {\r\n  console.log(e);\r\n});\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","__webpack_require__.j = 826;","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t826: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkvue_multiple_pages\"] = self[\"webpackChunkvue_multiple_pages\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [998], function() { return __webpack_require__(6738); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["module","exports","index","title","requiredParams","userAgreement","env","process","isProEnv","timeout","requestRetry","requestRetryDelay","baseURL","window","location","origin","tokenKey","userInfoKey","getPageParams","key","paramsUrl","href","split","length","paramsArr","paramsData","forEach","r","data","setUserInfo","user","Storage","getToken","isLogin","setToken","token","service","Axios","headers","Accept","defaults","retry","retryDelay","interceptors","request","use","config","showLoading","showLoadingToast","message","forbidClick","error","closeToast","Promise","reject","response","res","status","showToast","Status","Data","Msg","login","params","url","method","username","ref","password","checked","onSubmit","async","value","Password","Username","Token","emit","__exports__","chat","question","answering","showLoginPopup","markedParse","t","marked","sendQuestion","trim","fetch","body","JSON","stringify","role","content","ok","msg","text","Error","push","decoder","TextDecoder","reader","getReader","done","read","decode","e","loginSuccess","pageName","PAGE_PATH","pageConfig","allPageConfig","validateParams","pageParams","errorMsg","Object","keys","name","desc","initPage","resolve","console","table","document","innerHTML","map","join","then","$pageName","$pageParams","createApp","App","mount","catch","log","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","m","deferred","O","result","chunkIds","fn","priority","notFulfilled","Infinity","i","fulfilled","j","every","splice","n","getter","__esModule","d","a","definition","o","defineProperty","enumerable","get","g","globalThis","this","Function","obj","prop","prototype","hasOwnProperty","call","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","id","chunkLoadingGlobal","self","bind","__webpack_exports__"],"sourceRoot":""}