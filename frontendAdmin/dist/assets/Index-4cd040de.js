import{d as O,b as x,c as _,o as B,H as j,w as o,f as l,h as t,j as s,t as m,P as y,p as A,k as R,E as p,S as w,_ as I,e as M}from"./index-aadf96f9.js";import{r as u}from"./request-195fb5bd.js";function b(n){return u.request({url:"/v1/option/get",method:"get",params:n})}function C(n){return u.request({url:"/v1/option/set",method:"get",params:n})}function N(){return u.request({url:"/v1/openai/keys",method:"get"})}function U(n){return u.request({url:"/v1/openai/key/destroy",method:"get",params:n})}function F(n){return u.request({url:"/v1/openai/key/add",method:"post",data:n})}function z(n){return u.request({url:"/v1/openai/key/ping",method:"get",params:n})}function H(n){return u.request({url:"/v1/openai/key/updateAmount",method:"get",params:n})}const G=n=>(A("data-v-1c62473e"),n=n(),R(),n),J=G(()=>l("div",{style:{display:"flex","justify-content":"space-between","align-items":"center"}},[l("span",null,"Openai"),l("div")],-1)),L={style:{display:"flex","align-items":"center","justify-content":"space-between",padding:"20px"}},Q={style:{display:"flex","align-items":"center","justify-content":"space-between",padding:"20px"}},W={style:{"max-width":"80%","font-size":"13px"}},X={style:{padding:"20px"}},Y={style:{padding:"10px"}},Z=O({__name:"Openai",setup(n){const v=x(""),f=x(""),h=x([]),r=()=>{b({key:"openai_url"}).then(e=>{v.value=e.OptionValue}),b({key:"openai_sys_prompt"}).then(e=>{f.value=e.OptionValue}),N().then(e=>{h.value=e})};r();const S=e=>{if(h.value.length===1){p.warning("最少保留一个key");return}U({id:e}).then(()=>{r()})},T=e=>{H({id:e}).then(()=>{p.success("同步成功"),r()})},V=e=>{z({id:e}).then(i=>{p.success(i),r()})},K=()=>{w.prompt("添加新的openai key","提示",{confirmButtonText:"OK",cancelButtonText:"Cancel"}).then(({value:e})=>{if(e==""){p.warning("请输入key");return}F({Value:e}).then(()=>{p.success("添加key成功"),r()})}).catch(()=>{})},$=()=>{w.prompt("编辑代理地址","提示",{confirmButtonText:"OK",cancelButtonText:"Cancel",inputValue:v.value}).then(({value:e})=>{if(e==""){p.warning("请输入url");return}C({key:"openai_url",val:e}).then(()=>{p.success("设置成功"),r()})}).catch(()=>{})},q=()=>{w.prompt("编辑系统提示词","提示",{confirmButtonText:"OK",cancelButtonText:"Cancel",inputType:"textarea",inputValue:f.value}).then(({value:e})=>{if(e==""){p.warning("请输入提示词");return}C({key:"openai_sys_prompt",val:e}).then(()=>{p.success("设置成功"),r()})}).catch(()=>{})};return(e,i)=>{const g=_("el-divider"),d=_("el-button"),c=_("el-table-column"),D=_("el-badge"),E=_("el-table"),P=_("el-card");return B(),j(P,{shadow:"never"},{header:o(()=>[J]),default:o(()=>[l("div",null,[l("div",null,[t(g,null,{default:o(()=>[s("请求或代理地址")]),_:1}),l("div",L,[l("p",null,m(v.value),1),t(d,{type:"warning",onClick:i[0]||(i[0]=y(a=>$(),["prevent"]))},{default:o(()=>[s(" 编辑 ")]),_:1})]),t(g,null,{default:o(()=>[s("Openai SysPrompt")]),_:1}),l("div",Q,[l("div",W,m(f.value),1),t(d,{type:"warning",onClick:i[1]||(i[1]=y(a=>q(),["prevent"]))},{default:o(()=>[s(" 编辑 ")]),_:1})]),t(g,null,{default:o(()=>[s("Openai Key池")]),_:1}),l("div",X,[t(d,{type:"success",onClick:i[2]||(i[2]=y(a=>K(),["prevent"]))},{default:o(()=>[s(" 添加 ")]),_:1}),t(E,{data:h.value,style:{width:"100%"}},{default:o(()=>[t(c,{width:"50",prop:"ID",label:"ID"}),t(c,{prop:"Value",label:"值"}),t(c,{prop:"ExpireTime",label:"过期时间"}),t(c,{prop:"Value",label:"使用/总额"},{default:o(a=>[s(m(a.row.UsedAmount.toFixed(2))+"/"+m(a.row.TotalAmount.toFixed(2)),1)]),_:1}),t(c,{prop:"Status",label:"状态"},{default:o(a=>[l("div",Y,[t(D,{"is-dot":"",type:a.row.Status==1?"success":"danger"},{default:o(()=>[s(m(a.row.Status==1?"正常":"异常"),1)]),_:2},1032,["type"])])]),_:1}),t(c,{prop:"ExceptionReason",label:"异常信息"}),t(c,{prop:"address",label:"操作",width:"310"},{default:o(a=>[t(d,{type:"danger",onClick:y(k=>S(a.row.ID),["prevent"])},{default:o(()=>[s(" 删除 ")]),_:2},1032,["onClick"]),t(d,{type:"primary",onClick:y(k=>V(a.row.ID),["prevent"])},{default:o(()=>[s(" Ping ")]),_:2},1032,["onClick"]),t(d,{type:"success",onClick:y(k=>T(a.row.ID),["prevent"])},{default:o(()=>[s(" 同步使用情况 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])])])])]),_:1})}}});const ee=I(Z,[["__scopeId","data-v-1c62473e"]]),te={class:"home"},ne=O({__name:"Index",setup(n){return(v,f)=>(B(),M("div",te,[t(ee)]))}});const se=I(ne,[["__scopeId","data-v-3b62a69b"]]);export{se as default};
