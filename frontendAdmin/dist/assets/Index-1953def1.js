import{d as x,b as h,c as r,o as O,H as N,w as a,f as i,h as o,j as _,t as V,P as y,E as c,p as E,k as $,S as g,_ as w,e as T}from"./index-e8372f18.js";import{r as b}from"./request-88389718.js";function k(n){return b.request({url:"/v1/option/get",method:"get",params:n})}function v(n){return b.request({url:"/v1/option/set",method:"get",params:n})}const J=n=>(E("data-v-15fea00c"),n=n(),$(),n),j=J(()=>i("div",{style:{display:"flex","justify-content":"space-between","align-items":"center"}},[i("span",null,"Openai"),i("div")],-1)),M={style:{display:"flex","align-items":"center","justify-content":"space-between"}},q=x({__name:"Openai",setup(n){const u=h(""),l=h([]),d=()=>{k({key:"openai_url"}).then(e=>{u.value=e.OptionValue}),k({key:"openai_keys"}).then(e=>{try{if(e.OptionValue=="")return;let t=JSON.parse(e.OptionValue)||[];l.value=[],t.forEach(s=>{l.value.push({val:s})})}catch(t){c.warning(JSON.stringify(t))}})};d();const B=e=>{if(l.value.length===1){c.warning("最少保留一个key");return}let t=[];l.value.forEach((s,p)=>{p!==e&&t.push(s.val)}),v({key:"openai_keys",val:JSON.stringify(t)}).then(()=>{d()})},C=()=>{g.prompt("添加新的openai key","提示",{confirmButtonText:"OK",cancelButtonText:"Cancel"}).then(({value:e})=>{if(e==""){c.warning("请输入key");return}let t=JSON.stringify([...l.value.map(s=>s.val),e]);v({key:"openai_keys",val:t}).then(()=>{c.success("添加key成功"),d()})}).catch(()=>{})},S=()=>{g.prompt("编辑代理地址","提示",{confirmButtonText:"OK",cancelButtonText:"Cancel",inputValue:u.value}).then(({value:e})=>{if(e==""){c.warning("请输入url");return}v({key:"openai_url",val:e}).then(()=>{c.success("设置成功"),d()})}).catch(()=>{})};return(e,t)=>{const s=r("el-divider"),p=r("el-button"),m=r("el-table-column"),I=r("el-table"),K=r("el-card");return O(),N(K,{shadow:"never"},{header:a(()=>[j]),default:a(()=>[i("div",null,[i("div",null,[o(s,null,{default:a(()=>[_("请求或代理地址")]),_:1}),i("div",M,[i("p",null,V(u.value),1),o(p,{type:"warning",onClick:t[0]||(t[0]=y(f=>S(),["prevent"]))},{default:a(()=>[_(" 编辑 ")]),_:1})]),o(s,{style:{"margin-top":"50px"}},{default:a(()=>[_("Openai Keys")]),_:1}),o(p,{type:"success",onClick:t[1]||(t[1]=y(f=>C(),["prevent"]))},{default:a(()=>[_(" 添加 ")]),_:1}),o(I,{data:l.value,style:{width:"100%"}},{default:a(()=>[o(m,{prop:"val",label:"值"}),o(m,{prop:"address",label:"操作"},{default:a(f=>[o(p,{type:"danger",onClick:y(P=>B(f.$index),["prevent"])},{default:a(()=>[_(" 删除 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])])])]),_:1})}}});const D=w(q,[["__scopeId","data-v-15fea00c"]]),U={class:"home"},H=x({__name:"Index",setup(n){return(u,l)=>(O(),T("div",U,[o(D)]))}});const A=w(H,[["__scopeId","data-v-9a971bff"]]);export{A as default};
