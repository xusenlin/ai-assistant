import{S as v,E as p,d as B,c as a,o as R,e as P,h as t,w as o,g as n,j as _,P as W,_ as D}from"./index-9a9a0f57.js";import{r as l}from"./request-507b28cf.js";import{u as I}from"./pagination-87aaff13.js";function q(e){return l.request({url:"/v1/sensitiveWords/list",method:"get",params:e})}function M(){return l.request({url:"/v1/sensitiveWords/migrate",method:"get"})}function A(e){return l.request({url:"/v1/sensitiveWords/destroy",method:"get",params:e})}function E(e){return l.request({url:"/v1/sensitiveWords/add",method:"get",params:{word:e}})}function T(e){return{clickMigrate:()=>{M().then(()=>{e(),p({type:"success",message:"迁移成功"})})},deleteRow:s=>{v.confirm("确认删除此记录吗？","确认操作",{confirmButtonText:"确认",cancelButtonText:"关闭",type:"warning"}).then(()=>{let{ID:r}=s;A({id:r}).then(()=>{p({type:"success",message:"删除成功"}),e()}).catch(()=>{})}).catch(()=>{})},addSensitiveWords:()=>{v.prompt("请输入你的敏感词","提示",{confirmButtonText:"OK",cancelButtonText:"Cancel"}).then(({value:s})=>{E(s).then(()=>{p({type:"success",message:"添加成功"}),e()})}).catch(()=>{})}}}const N={class:"box"},S=B({__name:"Index",setup(e){const{searchParams:m,tableData:f,paginationRef:g,setTableData:s,refreshTable:r,resetParams:h}=I(),{deleteRow:x,clickMigrate:b,addSensitiveWords:y}=T(r);return($,c)=>{const d=a("el-button"),k=a("ActionBar"),i=a("el-table-column"),C=a("el-table"),w=a("Pagination");return R(),P("div",N,[t(k,{onReset:n(h),onRefresh:n(r)},{left:o(()=>[t(d,{type:"primary",onClick:c[0]||(c[0]=u=>n(y)())},{default:o(()=>[_("添加")]),_:1}),t(d,{type:"success",onClick:c[1]||(c[1]=u=>n(b)())},{default:o(()=>[_("敏感词迁移")]),_:1})]),right:o(()=>[]),_:1},8,["onReset","onRefresh"]),t(C,{data:n(f),style:{width:"100%"},"max-height":"calc(100vh - 267px)"},{default:o(()=>[t(i,{prop:"ID",label:"ID"}),t(i,{prop:"Name",label:"Name"}),t(i,{prop:"CreatedAt",label:"CreatedAt"}),t(i,{fixed:"right",label:"操作"},{default:o(u=>[t(d,{type:"danger",onClick:W(F=>n(x)(u.row),["prevent"])},{default:o(()=>[_(" 删除 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),t(w,{ref_key:"paginationRef",ref:g,params:n(m),reqFunc:n(q),onPageData:n(s)},null,8,["params","reqFunc","onPageData"])])}}});const L=D(S,[["__scopeId","data-v-b1b743f9"]]);export{L as default};
