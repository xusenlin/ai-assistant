import{d as O,b as g,c,o as B,H as j,w as o,f as a,h as t,j as s,t as x,P as y,p as P,k as M,E as i,S as k,_ as C,e as N}from"./index-ada37708.js";import{r as d}from"./request-564a548a.js";function w(n){return d.request({url:"/v1/option/get",method:"get",params:n})}function b(n){return d.request({url:"/v1/option/set",method:"get",params:n})}function R(){return d.request({url:"/v1/openai/keys",method:"get"})}function U(n){return d.request({url:"/v1/openai/key/destroy",method:"get",params:n})}function z(n){return d.request({url:"/v1/openai/key/add",method:"post",data:n})}function H(n){return d.request({url:"/v1/openai/key/ping",method:"get",params:n})}const A=n=>(P("data-v-d857621e"),n=n(),M(),n),F=A(()=>a("div",{style:{display:"flex","justify-content":"space-between","align-items":"center"}},[a("span",null,"Openai"),a("div")],-1)),G={style:{display:"flex","align-items":"center","justify-content":"space-between",padding:"20px"}},J={style:{display:"flex","align-items":"center","justify-content":"space-between",padding:"20px"}},L={style:{"max-width":"80%","font-size":"13px"}},Q={style:{padding:"20px"}},W={style:{padding:"10px"}},X=O({__name:"Openai",setup(n){const v=g(""),f=g(""),m=g([]),r=()=>{w({key:"openai_url"}).then(e=>{v.value=e.OptionValue}),w({key:"openai_sys_prompt"}).then(e=>{f.value=e.OptionValue}),R().then(e=>{m.value=e})};r();const I=e=>{if(m.value.length===1){i.warning("最少保留一个key");return}U({id:e}).then(()=>{r()})},S=e=>{H({key:e}).then(l=>{i.success(l),r()})},V=()=>{k.prompt("添加新的openai key","提示",{confirmButtonText:"OK",cancelButtonText:"Cancel"}).then(({value:e})=>{if(e==""){i.warning("请输入key");return}z({Value:e}).then(()=>{i.success("添加key成功"),r()})}).catch(()=>{})},K=()=>{k.prompt("编辑代理地址","提示",{confirmButtonText:"OK",cancelButtonText:"Cancel",inputValue:v.value}).then(({value:e})=>{if(e==""){i.warning("请输入url");return}b({key:"openai_url",val:e}).then(()=>{i.success("设置成功"),r()})}).catch(()=>{})},T=()=>{k.prompt("编辑系统提示词","提示",{confirmButtonText:"OK",cancelButtonText:"Cancel",inputType:"textarea",inputValue:f.value}).then(({value:e})=>{if(e==""){i.warning("请输入提示词");return}b({key:"openai_sys_prompt",val:e}).then(()=>{i.success("设置成功"),r()})}).catch(()=>{})};return(e,l)=>{const h=c("el-divider"),u=c("el-button"),_=c("el-table-column"),$=c("el-badge"),q=c("el-table"),D=c("el-card");return B(),j(D,{shadow:"never"},{header:o(()=>[F]),default:o(()=>[a("div",null,[a("div",null,[t(h,null,{default:o(()=>[s("请求或代理地址")]),_:1}),a("div",G,[a("p",null,x(v.value),1),t(u,{type:"warning",onClick:l[0]||(l[0]=y(p=>K(),["prevent"]))},{default:o(()=>[s(" 编辑 ")]),_:1})]),t(h,null,{default:o(()=>[s("Openai SysPrompt")]),_:1}),a("div",J,[a("div",L,x(f.value),1),t(u,{type:"warning",onClick:l[1]||(l[1]=y(p=>T(),["prevent"]))},{default:o(()=>[s(" 编辑 ")]),_:1})]),t(h,null,{default:o(()=>[s("Openai Key池")]),_:1}),a("div",Q,[t(u,{type:"success",onClick:l[2]||(l[2]=y(p=>V(),["prevent"]))},{default:o(()=>[s(" 添加 ")]),_:1}),t(q,{data:m.value,style:{width:"100%"}},{default:o(()=>[t(_,{width:"50",prop:"ID",label:"ID"}),t(_,{prop:"Value",label:"值"}),t(_,{prop:"Status",label:"状态"},{default:o(p=>[a("div",W,[t($,{"is-dot":"",type:p.row.Status==1?"success":"danger"},{default:o(()=>[s(x(p.row.Status==1?"正常":"异常"),1)]),_:2},1032,["type"])])]),_:1}),t(_,{prop:"ExceptionReason",label:"异常信息"}),t(_,{prop:"address",label:"操作"},{default:o(p=>[t(u,{type:"danger",onClick:y(E=>I(p.row.ID),["prevent"])},{default:o(()=>[s(" 删除 ")]),_:2},1032,["onClick"]),t(u,{type:"primary",onClick:y(E=>S(p.row.Value),["prevent"])},{default:o(()=>[s(" 测试 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])])])])]),_:1})}}});const Y=C(X,[["__scopeId","data-v-d857621e"]]),Z={class:"home"},ee=O({__name:"Index",setup(n){return(v,f)=>(B(),N("div",Z,[t(Y)]))}});const oe=C(ee,[["__scopeId","data-v-3b62a69b"]]);export{oe as default};
